<script type="text/javascript"> 

    function isGamemaster()
    {
    	return user_username == game_session_owner_username;
    }

	function getCharacterSheetProperty(element, property) 
	{ 
		var value;

		if (element['character_sheet_settings']) {
			value = element['character_sheet_settings'][property];
		}

		if (!value) {
			value = getCharacterSheetFromJQuery(element, property);
		}

		return value;
	}

	function getCharacterSheetFromJQuery(element, property)
 	{
 	 	if ($( element ).attr('id') == 'main-container') {
			return null;
 	 	}
 	 	else if ($( element ).hasClass('character-sheet') || $( element ).hasClass('character-sheet-provisional')) {
 	 		return $( element ).children('#character_sheet_settings').children('#'+property).text();
		}
		else {
			return getCharacterSheetFromJQuery($( element ).parent(), property);
		}
 	}

	function isOwnerOfCharacterSheetId(character_sheet_id)
 	{
		if ($( ".main-container #"+character_sheet_id )) {
			var character_sheet_user_username = $( ".main-container #"+character_sheet_id ).children('#character_sheet_settings').children('#user_username').text();
			return (character_sheet_user_username == user_username);
		}
		return false;
 	}

 	function getCharacterSheetIdFromElement(element) {
 		var is_only_number = /^\d+$/;
		
 		if (element.parent().attr('id') == user_username || // || element.parent().attr("id") == "game_master"
 				element.parent().attr('id') == 'other_users_connected' ||
 				element.parent().attr('id') == 'myModal') { 
 			return false;
 		}
 		else if (is_only_number.test(element.parent().attr("id"))) {
 			return element.parent().attr("id");
 		}
 		else {
 			return getCharacterSheetIdFromElement(element.parent());
 		}
 	}
 	
</script>